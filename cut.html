<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Network Status - Summary</title>
    <style>
        :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --online: #238636; --offline: #da3633; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: #c9d1d9; padding: 40px; }
        .compact-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .status-card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; position: relative; }
        .status-indicator { position: absolute; top: 15px; right: 15px; padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; }
        .online-label { background: rgba(35, 134, 54, 0.1); color: #3fb950; border: 1px solid #238636; }
        .offline-label { background: rgba(218, 54, 51, 0.1); color: #f85149; border: 1px solid #da3633; }
        h3 { margin: 0 0 5px 0; font-size: 1.1rem; }
        .host { font-size: 0.8rem; color: #8b949e; margin-bottom: 15px; }
        .player-bar { background: #010409; height: 8px; border-radius: 4px; margin: 10px 0; overflow: hidden; }
        .player-fill { background: #58a6ff; height: 100%; transition: width 0.5s ease; }
        .count { font-size: 0.9rem; font-weight: bold; }
        .last-seen { font-size: 0.7rem; color: #f85149; margin-top: 10px; }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 40px;">Live Server Status</h1>
    <div id="summary-wrapper" class="compact-grid"></div>

    <script>
        async function fetchCut() {
            try {
                const res = await fetch("http://localhost:3000/api/cut");
                const data = await res.json();
                const container = document.getElementById('summary-wrapper');
                
                container.innerHTML = data.map(srv => {
                    const percent = srv.online ? (srv.players / srv.maxPlayers) * 100 : 0;
                    return `
                        <div class="status-card">
                            <div class="status-indicator ${srv.online ? 'online-label' : 'offline-label'}">
                                ${srv.online ? 'Live' : 'Offline'}
                            </div>
                            <h3>${srv.id}</h3>
                            <div class="host">${srv.domain}</div>
                            
                            ${srv.online ? `
                                <div class="count">${srv.players} / ${srv.maxPlayers} Spieler</div>
                                <div class="player-bar"><div class="player-fill" style="width: ${percent}%"></div></div>
                            ` : `
                                <div class="last-seen">Zuletzt online: <br>${srv.lastOnline || 'Unbekannt'}</div>
                            `}
                        </div>
                    `;
                }).join('');
            } catch (e) { console.error(e); }
        }
        fetchCut();
        setInterval(fetchCut, 1000);
    </script>
</body>
</html>